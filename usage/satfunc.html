<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>satfunc &mdash; res2df 1.1.1.dev6+gae2cf342 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="summary" href="summary.html" />
    <link rel="prev" title="rft" href="rft.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            res2df
              <img src="../_static/equinor-logo2.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.1.1.dev6+gae2cf342
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../usage.html">Usage and examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="equil.html">equil</a></li>
<li class="toctree-l2"><a class="reference internal" href="compdat.html">compdat</a></li>
<li class="toctree-l2"><a class="reference internal" href="fipreports.html">fipreports</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid.html">grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="gruptree.html">gruptree</a></li>
<li class="toctree-l2"><a class="reference internal" href="nnc.html">nnc</a></li>
<li class="toctree-l2"><a class="reference internal" href="pillars.html">pillars</a></li>
<li class="toctree-l2"><a class="reference internal" href="pvt.html">pvt</a></li>
<li class="toctree-l2"><a class="reference internal" href="rft.html">rft</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">satfunc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generating-include-files-from-dataframes">Generating include files from dataframes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extracting-properties-pr-satnum">Extracting properties pr. SATNUM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-pyscal-library">The pyscal library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="summary.html">summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="trans.html">trans</a></li>
<li class="toctree-l2"><a class="reference internal" href="wcon.html">wcon</a></li>
<li class="toctree-l2"><a class="reference internal" href="wellconnstatus.html">wellconnstatus</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../res2csv.html">res2csv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../csv2res.html">csv2res</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribution.html">Contributing to res2df</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../res2df/res2df.html"><code class="docutils literal notranslate"><span class="pre">res2df</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">res2df</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../usage.html">Usage and examples</a></li>
      <li class="breadcrumb-item active">satfunc</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/usage/satfunc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="satfunc">
<h1>satfunc<a class="headerlink" href="#satfunc" title="Permalink to this heading"></a></h1>
<p>satfunc will extract saturation functions from <a class="reference internal" href="../glossary.html#term-.DATA-file"><span class="xref std std-term">.DATA files</span></a> or from
<a class="reference internal" href="../glossary.html#term-include-file"><span class="xref std std-term">include files</span></a>, these are the keywords <code class="docutils literal notranslate"><span class="pre">SWOF</span></code>, <code class="docutils literal notranslate"><span class="pre">SGOF</span></code>,
<code class="docutils literal notranslate"><span class="pre">SGWFN</span></code>, <code class="docutils literal notranslate"><span class="pre">SWFN</span></code>, <code class="docutils literal notranslate"><span class="pre">SOF2</span></code>, <code class="docutils literal notranslate"><span class="pre">SGFN</span></code>, <code class="docutils literal notranslate"><span class="pre">SOF3</span></code> and  <code class="docutils literal notranslate"><span class="pre">SLGOF</span></code>.</p>
<p>The data obtained from one invocation of the satfunc module will be put in one
dataframe, where data from different keywords are separated by the <code class="docutils literal notranslate"><span class="pre">KEYWORD</span></code>
column.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">res2df</span> <span class="kn">import</span> <span class="n">satfunc</span><span class="p">,</span> <span class="n">ResdataFiles</span>

<span class="n">resdatafiles</span> <span class="o">=</span> <span class="n">ResdataFiles</span><span class="p">(</span><span class="s1">&#39;MYDATADECK.DATA&#39;</span><span class="p">)</span>
<span class="n">dframe</span> <span class="o">=</span> <span class="n">satfunc</span><span class="o">.</span><span class="n">df</span><span class="p">(</span><span class="n">resdatafiles</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Example satfunc table (only a subset of the rows are shown)</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>SW</p></th>
<th class="head"><p>KRW</p></th>
<th class="head"><p>KROW</p></th>
<th class="head"><p>PCOW</p></th>
<th class="head"><p>SATNUM</p></th>
<th class="head"><p>KEYWORD</p></th>
<th class="head"><p>SG</p></th>
<th class="head"><p>KRG</p></th>
<th class="head"><p>KROG</p></th>
<th class="head"><p>PCOG</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0.32</p></td>
<td><p>0.0</p></td>
<td><p>1.0</p></td>
<td><p>165.728151841</p></td>
<td><p>1</p></td>
<td><p>SWOF</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0.3374</p></td>
<td><p>1.676119e-08</p></td>
<td><p>0.9680216</p></td>
<td><p>153.074777675</p></td>
<td><p>1</p></td>
<td><p>SWOF</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0.3548</p></td>
<td><p>4.795631e-07</p></td>
<td><p>0.9119928</p></td>
<td><p>141.953412741</p></td>
<td><p>1</p></td>
<td><p>SWOF</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0.3722</p></td>
<td><p>3.451875e-06</p></td>
<td><p>0.8430636</p></td>
<td><p>132.116390967</p></td>
<td><p>1</p></td>
<td><p>SWOF</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0.3896</p></td>
<td><p>1.412955e-05</p></td>
<td><p>0.7672163</p></td>
<td><p>123.365246941</p></td>
<td><p>1</p></td>
<td><p>SWOF</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0.98</p></td>
<td><p>0.92</p></td>
<td><p>0.0</p></td>
<td><p>30.9230370781</p></td>
<td><p>1</p></td>
<td><p>SWOF</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>1.0</p></td>
<td><p>1.0</p></td>
<td><p>0.0</p></td>
<td><p>30.0</p></td>
<td><p>1</p></td>
<td><p>SWOF</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>1</p></td>
<td><p>SGOF</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
<td><p>1.0</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>1</p></td>
<td><p>SGOF</p></td>
<td><p>0.0192</p></td>
<td><p>0.001220697</p></td>
<td><p>0.8731062</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>1</p></td>
<td><p>SGOF</p></td>
<td><p>0.0384</p></td>
<td><p>0.004073989</p></td>
<td><p>0.7505835</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>1</p></td>
<td><p>SGOF</p></td>
<td><p>0.6144</p></td>
<td><p>0.8307268</p></td>
<td><p>2.713968e-07</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>1</p></td>
<td><p>SGOF</p></td>
<td><p>0.64</p></td>
<td><p>0.87</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>1</p></td>
<td><p>SGOF</p></td>
<td><p>0.6533333</p></td>
<td><p>0.9133333</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>1</p></td>
<td><p>SGOF</p></td>
<td><p>0.6666667</p></td>
<td><p>0.9566667</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>1</p></td>
<td><p>SGOF</p></td>
<td><p>0.68</p></td>
<td><p>1.0</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
</tr>
</tbody>
</table>
<p>Alternatively, the same data can be produced as a CSV file using the command line</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">res2csv satfunc MYDATADECK.DATA --verbose --output satfunc.csv</span>
</pre></div>
</div>
<p>It is possible to extract keywords one at a time using the <code class="docutils literal notranslate"><span class="pre">--keywords</span></code> command
line option.</p>
<p>Instead of complete <a class="reference internal" href="../glossary.html#term-deck"><span class="xref std std-term">decks</span></a>, individual include files may also be parsed, but
only one at a time.</p>
<section id="generating-include-files-from-dataframes">
<h2>Generating include files from dataframes<a class="headerlink" href="#generating-include-files-from-dataframes" title="Permalink to this heading"></a></h2>
<p>When a dataframe of saturation function data is loaded into Python, any operation
may be applied on the data. Simple operations would typically be scaling, perhaps
individual pr. SATNUM. Still, read below on pyscal before embarking on too many
Pandas operations on saturation functions.</p>
<p>An example operation could for example to scale all <cite>KRW</cite> data of the first SATNUM
in the SWOF table, and if <cite>dframe</cite> holds all the data, this can be performed by
the command</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build boolean array of which rows in the big dataframe we want to touch:</span>
<span class="n">rows_to_touch</span> <span class="o">=</span> <span class="p">(</span><span class="n">dframe</span><span class="p">[</span><span class="s2">&quot;KEYWORD&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;SWOF&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dframe</span><span class="p">[</span><span class="s2">&quot;SATNUM&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># Multiplicate these rows by 0.5</span>
<span class="n">dframe</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">rows_to_touch</span><span class="p">,</span> <span class="s2">&quot;KRW&quot;</span><span class="p">]</span> <span class="o">*=</span> <span class="mf">0.5</span>
</pre></div>
</div>
<p>For a dataframe or a CSV file in the format provided by this module, an
<a class="reference internal" href="../glossary.html#term-include-file"><span class="xref std std-term">include file</span></a> can be generated either with the Python API
<a class="reference internal" href="../res2df/res2df.satfunc.html#res2df.satfunc.df2res" title="res2df.satfunc.df2res"><code class="xref py py-func docutils literal notranslate"><span class="pre">res2df.satfunc.df2res()</span></code></a> function or the command</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">csv2res satfunc satfunc.csv --output relperm.inc --keywords SWOF SGOF --verbose</span>
</pre></div>
</div>
<p>which should give a file <code class="docutils literal notranslate"><span class="pre">relperm.inc</span></code> that can be parsed by reservoir simulators. The command
above will only pick the keywords <code class="docutils literal notranslate"><span class="pre">SWOF</span></code> and <code class="docutils literal notranslate"><span class="pre">SGOF</span></code> (in the case there are
data for more keywords in the dataframe).</p>
<p>There are no automated checks for validity of the dumped <a class="reference internal" href="../glossary.html#term-include-file"><span class="xref std std-term">include file</span></a>.</p>
</section>
<section id="extracting-properties-pr-satnum">
<h2>Extracting properties pr. SATNUM<a class="headerlink" href="#extracting-properties-pr-satnum" title="Permalink to this heading"></a></h2>
<p>If you have an <a class="reference internal" href="../glossary.html#term-include-file"><span class="xref std std-term">include file</span></a> prepared (from any source), you might need to
determine certain properties like endpoint. If you need to determine for
example “SOWCR” - the largest oil saturation for which oil is immobile,
because you need to avoid SOWCR + SWCR overshooting 1, you can write a code</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">res2df</span> <span class="kn">import</span> <span class="n">satfunc</span>

<span class="c1"># Read an include file directly into a DataFrame</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;relperm.inc&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_handle</span><span class="p">:</span>
    <span class="n">sat_df</span> <span class="o">=</span> <span class="n">satfunc</span><span class="o">.</span><span class="n">df</span><span class="p">(</span><span class="n">f_handle</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="c1"># Write a function that is to operate on each SATNUM:</span>
<span class="k">def</span> <span class="nf">sowcr</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine the largest oil saturation where</span>
<span class="sd">    oil relperm is below 1e-7&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;KROW&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1e-7</span><span class="p">][</span><span class="s2">&quot;SW&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

<span class="c1"># Apply that function individually on each SATNUM:</span>
<span class="n">sat_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;SATNUM&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">sowcr</span><span class="p">)</span>
</pre></div>
</div>
<p>for an example <a class="reference internal" href="../glossary.html#term-include-file"><span class="xref std std-term">include file</span></a>, this could result in</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">SATNUM</span>
<span class="go">1    0.15492</span>
<span class="go">2    0.21002</span>
<span class="go">3    0.05442</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
</section>
<section id="the-pyscal-library">
<h2>The pyscal library<a class="headerlink" href="#the-pyscal-library" title="Permalink to this heading"></a></h2>
<p>Manipulation of curve shapes or potentially interpolation between curves is hard
to do directly on the dataframes. Before doing manipulations of dataframes in
<code class="docutils literal notranslate"><span class="pre">res2df.satfunc</span></code>, consider if it is better to implement the manipulations
through the <a class="reference external" href="https://equinor.github.io/pyscal/">pyscal</a> library.
Pyscal can create curves from parametrizations, and interpolate between curves.</p>
<p>Pyscal can initialize its relperm objects from <a class="reference internal" href="../glossary.html#term-include-file"><span class="xref std std-term">include files</span></a>
through the parsing capabilities of res2df.satfunc.</p>
<p>The function <code class="docutils literal notranslate"><span class="pre">pyscal.pyscallist.df()</span></code> is analogous to <code class="docutils literal notranslate"><span class="pre">res2df.satfunc.df()</span></code> in
what it produces, and the <a class="reference internal" href="../res2df/res2df.satfunc.html#res2df.satfunc.df2res" title="res2df.satfunc.df2res"><code class="xref py py-func docutils literal notranslate"><span class="pre">res2df.satfunc.df2res()</span></code></a> can be used on both
(potentially with some filtering needed.).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rft.html" class="btn btn-neutral float-left" title="rft" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="summary.html" class="btn btn-neutral float-right" title="summary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Equinor 2019-2024.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #ff1243;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #474747;
    }
    .wy-side-nav-search > div.version {
      color: white;
    }
  </style>


</body>
</html>